<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using shinytest with continuous integration • shinytest</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Using shinytest with continuous integration">
<meta property="og:description" content="shinytest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinytest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/shinytest.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ci.html">Using shinytest with continuous integration</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/ide.html">Integration with RStudio IDE</a>
    </li>
    <li>
      <a href="../articles/in-depth.html">Testing in depth</a>
    </li>
    <li>
      <a href="../articles/package.html">Using shinytest with R packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rstudio/shinytest/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ci_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using shinytest with continuous integration</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/shinytest/blob/HEAD/vignettes/ci.Rmd" class="external-link"><code>vignettes/ci.Rmd</code></a></small>
      <div class="hidden name"><code>ci.Rmd</code></div>

    </div>

    
    
<p>Shinytest can be used not only when developing applications locally – it can also be used with continuous integration (CI) platforms, such as <a href="https://help.github.com/en/actions" class="external-link">GitHub Actions</a> or <a href="https://travis-ci.org/" class="external-link">Travis CI</a>.</p>
<p>Our recommendation nowadays is to use Github Actions over Travis CI, especially if testing on Windows is important. To learn about Shiny testing with Github Actions, see <a href="https://github.com/rstudio/shiny-testing-gha-example" class="external-link uri">https://github.com/rstudio/shiny-testing-gha-example</a>.</p>
<p>The rest of this document explains how to use shinytest with GitHub and Travis CI in two use cases: with applications that stand alone (are not part of an R package), and with an application that are part of an R package.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The overall procedure for enabling tests on a CI platform is this:</p>
<ul>
<li>First create tests locally (on your development machine) and save the expected results.</li>
<li>Commit the expected results into the project’s git repository and push to GitHub.</li>
<li>Enable Travis CI for the repository.</li>
</ul>
<p>Once you have enabled continuous integration, the typical development cycle is this:</p>
<ul>
<li>Modify your project, commit, and push the changes.</li>
<li>The CI platform will automatically do a <em>build</em>, in which it downloads the code and runs tests. If the tests fail, it will send you an email alert.</li>
</ul>
<p>As you develop your application, it may also be appropriate to add, remove, or modify tests, or re-run tests and save new expected results.</p>
</div>
<div class="section level2">
<h2 id="travis-setup">Travis setup<a class="anchor" aria-label="anchor" href="#travis-setup"></a>
</h2>
<p>You will first need to create an account on <a href="https://travis-ci.org/" class="external-link">Travis CI</a>. You can sign in to Travis with your GitHub account.</p>
<p>If you have not created a GitHub repository for your project, do that. Then, on the Travis <a href="https://travis-ci.org/profile" class="external-link">profile page</a>, you can enable Travis CI for your project. This means that whenever you push commits to GitHub, it will trigger a test run on Travis.</p>
</div>
<div class="section level2">
<h2 id="a-repository-with-a-single-application">A repository with a single application<a class="anchor" aria-label="anchor" href="#a-repository-with-a-single-application"></a>
</h2>
<p>For Shiny applications that aren’t part of an R package, there are two common ways that the repository will be set up:</p>
<ol style="list-style-type: decimal">
<li>The repository contains one application, and the application files (like <code>server.R</code>, <code>ui.R</code>, or <code>app.R</code>) are contained at the top level of the repository.</li>
<li>The repository contains more than one application files, and each application is contained in a subdirectory.</li>
</ol>
<p>This section explains how to set up Travis to test a repository with a single application. See <a href="https://github.com/rstudio/shinytest-ci-example" class="external-link uri">https://github.com/rstudio/shinytest-ci-example</a> for an example.</p>
<p>The directory structure of such a project will look something like this:</p>
<pre><code>/
├── .travis.yml
├── run_tests.R
├── README.md
├── app.R
├── tests
│   ├── test.R
│   ├── test-expected
│       ├── 001.json
│       ├── 001.png
│       ├── 002.json
│       └── 002.png
└── packrat
    └── packrat.lock</code></pre>
<p>The files that you will need to add are described below.</p>
<div class="section level3">
<h3 id="travis-yml">
<code>.travis.yml</code><a class="anchor" aria-label="anchor" href="#travis-yml"></a>
</h3>
<p>This file contains information for Travis to build and test your application. It should look like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">dist</span><span class="kw">:</span><span class="at"> trusty</span><span class="co">   # Use Ubuntu 14.04 image (instead of 12.04)</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">language</span><span class="kw">:</span><span class="at"> r</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">sudo</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">r</span><span class="kw">:</span><span class="at"> </span><span class="fl">3.4.1</span></span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co"># Install packrat if needed and have it restore packages.</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="at">  </span><span class="kw">-</span><span class="at"> R -e 'if (system.file(package="packrat") == "") install.packages("packrat")'</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="at">  </span><span class="kw">-</span><span class="at"> R -e "packrat::packify(); packrat::restore()"</span></span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">cache</span><span class="kw">:</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">  # Main R library</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="at">  </span><span class="fu">packages</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="at">  </span><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">    # Packrat packages</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="at">    </span><span class="kw">-</span><span class="at"> packrat/lib</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">    # PhantomJS</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="at">    </span><span class="kw">-</span><span class="at"> travis_phantomjs</span></span>
<span id="cb2-19"><a href="#cb2-19"></a></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co"># Install PhantomJS (if not cached)</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="fu">before_install</span><span class="kw">:</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"export PHANTOMJS_VERSION=2.1.1"</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"phantomjs --version"</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"export PATH=$PWD/travis_phantomjs/phantomjs-$PHANTOMJS_VERSION-linux-x86_64/bin:$PATH"</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"hash -r"</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"phantomjs --version"</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"if [ $(phantomjs --version) != $PHANTOMJS_VERSION ]; then rm -rf $PWD/travis_phantomjs; mkdir -p $PWD/travis_phantomjs; fi"</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"if [ $(phantomjs --version) != $PHANTOMJS_VERSION ]; then wget https://github.com/Medium/phantomjs/releases/download/v$PHANTOMJS_VERSION/phantomjs-$PHANTOMJS_VERSION-linux-x86_64.tar.bz2 -O $PWD/travis_phantomjs/phantomjs-$PHANTOMJS_VERSION-linux-x86_64.tar.bz2; fi"</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"if [ $(phantomjs --version) != $PHANTOMJS_VERSION ]; then tar -xvf $PWD/travis_phantomjs/phantomjs-$PHANTOMJS_VERSION-linux-x86_64.tar.bz2 -C $PWD/travis_phantomjs; fi"</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"if [ $(phantomjs --version) != $PHANTOMJS_VERSION ]; then hash -r; fi"</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"phantomjs --version"</span></span>
<span id="cb2-32"><a href="#cb2-32"></a></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="at">  </span><span class="kw">-</span><span class="at"> R -f run_tests.R</span></span></code></pre></div>
<p>You should change the R version (set to <code>3.4.1</code> above) to whatever R version is being used on the platform that your application will be deployed to.</p>
</div>
<div class="section level3">
<h3 id="run_tests-r">
<code>run_tests.R</code><a class="anchor" aria-label="anchor" href="#run_tests-r"></a>
</h3>
<p>The <code>run_tests.R</code> script should look like this. It simply runs the tests for the app, and if the tests fail, it raises error (so that Travis knows the test failed) and outputs logging information:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org" class="external-link">testthat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/shinytest" class="external-link">shinytest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">test_that</a></span><span class="op">(</span><span class="st">"Application works"</span>, <span class="op">{</span></span>
<span>  <span class="co"># Use compareImages=FALSE because the expected image screenshots were created</span></span>
<span>  <span class="co"># on a Mac, and they will differ from screenshots taken on the CI platform,</span></span>
<span>  <span class="co"># which runs on Linux.</span></span>
<span>  <span class="fu"><a href="../reference/expect_pass.html">expect_pass</a></span><span class="op">(</span><span class="fu"><a href="../reference/testApp.html">testApp</a></span><span class="op">(</span><span class="st">"."</span>, compareImages <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Notice the use of <code>compareImages=FALSE</code>. When the expected results are generated on one platform (like Mac or Windows) and then tested on another (Travis uses Linux), this option is needed to avoid spurious test failures. This is because R’s plot rendering engine generates slightly different results across platforms, and also because the headless browser generates slightly different results across platforms. When this option is used, the test will only compare the JSON representation of application state, and not the screenshots or plots.</p>
<p>If you develop on Linux and create the expected test results on Linux, then you should be able to leave out the <code>compareImages</code> argument; it defaults to <code>TRUE</code>.</p>
</div>
<div class="section level3">
<h3 id="packratpackrat-lock">
<code>packrat/packrat.lock</code><a class="anchor" aria-label="anchor" href="#packratpackrat-lock"></a>
</h3>
<p>This file contains a list of packages used by your application, and the version of each package that you currently have installed on your system. It is the same mechanism that is used by shinyapps.io and RStudio Connect. This file ensures that Travis will use the same versions of packages that you are using locally.</p>
<p>To create the <code>packrat/packrat.lock</code> file, run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">packrat</span><span class="fu">::</span><span class="fu">.snapshotImpl</span><span class="op">(</span><span class="st">"."</span>, snapshot.sources <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>NOTE: Future versions of packrat (0.4.8-15 and higher) will be able to use use <code>snapshot(snapshot.sources=FALSE)</code> instead of <code>.snapshotImpl</code>.</p>
<p><strong>Whenever you update packages on your development machine, you should run this command again to make sure the packages used on Travis stay in sync.</strong></p>
<p>An alternative to using packrat is to create a DESCRIPTION file. This will not lock package versions; instead, it will use the latest version of each package from CRAN.</p>
</div>
<div class="section level3">
<h3 id="running-the-first-build">Running the first build<a class="anchor" aria-label="anchor" href="#running-the-first-build"></a>
</h3>
<p>Once you’ve added these files, commit them and push to GitHub. This will trigger a build on Travis. (There may be a delay of a few minutes before the tests begin.)</p>
<p>The first time the test runs, Travis will send you an email with the result. After a successful build, Travis will send emails when a build fails.</p>
<p>The first build of your package on Travis will generally take much longer than subsequent runs, because it needs to install all the R packages the first time. After that, the packages are cached, so the builds should be much faster.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-repository-with-multiple-applications">A repository with multiple applications<a class="anchor" aria-label="anchor" href="#a-repository-with-multiple-applications"></a>
</h2>
<p>Another way to run your tests is using a repository with multiple applications, each in its own subdirectory. See <a href="https://github.com/rstudio/shinytest-ci-example-multi" class="external-link uri">https://github.com/rstudio/shinytest-ci-example-multi</a> for an example.</p>
<p>The directory structure would look something like this:</p>
<pre><code>/
├── .travis.yml
├── run_tests.R
├── README.md
│
├── 01_hello
│   ├── app.R
│   └── tests
│       ├── test.R
│       ├── test-expected
│           ├── 001.json
│           ├── 001.png
│           ├── 002.json
│           └── 002.png
├── 06_tabsets
│  ├── app.R
│  └── tests
│      ├── mytest.R
│      └── mytest-expected
│          ├── 001.json
│          ├── 001.png
│          ├── 002.json
│          ├── 002.png
│          ├── 003.json
│          └── 003.png
└── packrat
    └── packrat.lock</code></pre>
<p>For a repository with this structure, the configuration is largely the same as a repository with a single app, as described above. The only difference is in the <code>run_tests.R</code> file.</p>
<div class="section level3">
<h3 id="run_tests-r-1">
<code>run_tests.R</code><a class="anchor" aria-label="anchor" href="#run_tests-r-1"></a>
</h3>
<p>The <code>run_tests.R</code> script should test each application in the respective directory, instead of testing just one application in the current directory.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org" class="external-link">testthat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/shinytest" class="external-link">shinytest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">test_that</a></span><span class="op">(</span><span class="st">"Application works"</span>, <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/expect_pass.html">expect_pass</a></span><span class="op">(</span><span class="fu"><a href="../reference/testApp.html">testApp</a></span><span class="op">(</span><span class="st">"01_hello"</span>, compareImages <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/expect_pass.html">expect_pass</a></span><span class="op">(</span><span class="fu"><a href="../reference/testApp.html">testApp</a></span><span class="op">(</span><span class="st">"06_tabsets"</span>, compareImages <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="testing-applications-in-a-package">Testing applications in a package<a class="anchor" aria-label="anchor" href="#testing-applications-in-a-package"></a>
</h2>
<p>See the <a href="package.html">Using shinytest with R packages</a> article.</p>
</div>
<div class="section level2">
<h2 id="frequently-asked-questions">Frequently asked questions<a class="anchor" aria-label="anchor" href="#frequently-asked-questions"></a>
</h2>
<div class="section level3">
<h3 id="how-do-i-add-a-status-badge-to-my-project">How do I add a status badge to my project?<a class="anchor" aria-label="anchor" href="#how-do-i-add-a-status-badge-to-my-project"></a>
</h3>
<p>In your <code>README.md</code> file, you can add a build status badge, like the one below, so that you can see the status of your code at a glance:</p>
<p><a href="https://travis-ci.org/rstudio/shinytest" class="external-link"><img src="https://travis-ci.org/rstudio/shinytest.svg?branch=main" alt="shinytest Build Status"></a></p>
<p>You can get the link by visiting your project’s Travis page (something like like <a href="https://travis-ci.org/rstudio/shinytest-ci-example" class="external-link uri">https://travis-ci.org/rstudio/shinytest-ci-example</a>) and clicking on the status badge that is displayed on that page. It will display a dialog box with the URL. Select “Markdown”, then copy and paste the code into your <code>README.md</code> file.</p>
</div>
<div class="section level3">
<h3 id="how-do-i-use-a-description-file-instead-of-packrat">How do I use a <code>DESCRIPTION</code> file instead of packrat?<a class="anchor" aria-label="anchor" href="#how-do-i-use-a-description-file-instead-of-packrat"></a>
</h3>
<p>Instead of using packrat, you can use a <code>DESCRIPTION</code> file can be used to tell Travis which packages are needed to test the application. Instead of locking each package to a specific version like packat, this will result in the latest version of each package being downloaded from CRAN. This may be appropriate if you want to make sure your application works with the latest version of each package, instead of a frozen set of packages.</p>
<p>To use a <code>DESCRIPTION</code> file, you need to modify your <code>.travis.yml</code> file to use Travis’s default package installation system instead of packrat. Remove these lines from the template provided above:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Install packrat if needed and have it restore packages.</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">install</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="at">  </span><span class="kw">-</span><span class="at"> R -e 'if (system.file(package="packrat") == "") install.packages("packrat")'</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="at">  </span><span class="kw">-</span><span class="at"> R -e "packrat::packify(); packrat::restore()"</span></span></code></pre></div>
<p>As well as this from the <code>cache</code> section:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">    # Packrat packages</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="at">    </span><span class="kw">-</span><span class="at"> packrat/lib</span></span></code></pre></div>
<p>You will not want generate a <code>packrat.lock</code> file, so do not run the packrat snapshot command listed above.</p>
<p>Next, create a <code>DESCRIPTION</code> file that looks something like this:</p>
<pre><code>Imports:
  shiny,
  shinytest</code></pre>
<p>The <code>Imports</code> field must list the R packages that your application uses.</p>
<p>Normally the latest versions of the listed packages will be installed from CRAN. However, if you need to install development versions of packages from Github, that can be done by adding a <code>Remotes</code> section. For example:</p>
<pre><code>Remotes:
  rstudio/shiny,
  rstudio/shinytest@dev</code></pre>
<p>This tells Travis to install the shiny package from the <code>main</code> branch of <a href="https://github.com/rstudio/shiny" class="external-link uri">https://github.com/rstudio/shiny</a>, the shinytest package from the <code>dev</code> branch of <a href="https://github.com/rstudio/shinytest" class="external-link uri">https://github.com/rstudio/shinytest</a>. In addition to branch names like <code>dev</code>, you can use commit hashes or tags.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Winston Chang, Gábor Csárdi, Hadley Wickham, Posit Software, PBC.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '7030758f1dfae4baea1a66de46029355',
    indexName: 'shinytest',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
